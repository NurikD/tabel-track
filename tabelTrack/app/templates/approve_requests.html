{% extends "base.html" %}
{% block title %}–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto p-6">

  <h2 class="text-2xl font-bold mb-4">üìã –ó–∞—è–≤–∫–∏ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ</h2>

  <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É -->
  <form method="get" class="mb-4 flex gap-2">
    <select name="type" class="border rounded px-3 py-1">
      <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
      <option value="vacation" {% if selected_type == "vacation" %}selected{% endif %}>–û—Ç–ø—É—Å–∫</option>
      <option value="sick" {% if selected_type == "sick" %}selected{% endif %}>–ë–æ–ª—å–Ω–∏—á–Ω—ã–π</option>
    </select>
    <button class="bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
  </form>

  <!-- –ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ -->
  <div class="mb-6">
    <h3 class="text-lg font-semibold mb-2 text-yellow-600">‚è≥ –í –æ–∂–∏–¥–∞–Ω–∏–∏</h3>
    {% if pending_requests %}
      {% for r in pending_requests %}
        <div class="bg-yellow-100 border rounded p-3 mb-2 flex justify-between items-center">
          <div>
            <p class="font-medium">{{ r.user.get_full_name }} ‚Äî {{ r.get_leave_type_display }}</p>
            <p class="text-sm text-gray-600">{{ r.start_date }} ‚Üí {{ r.end_date }}</p>
            {% if r.comment %}<p class="text-sm italic text-gray-700 mt-1">{{ r.comment }}</p>{% endif %}
          </div>
          <form method="post" class="flex gap-2 items-center">{% csrf_token %}
            <input type="hidden" name="request_id" value="{{ r.id }}">
            <button name="action" value="approve" class="bg-green-500 text-white px-3 py-1 rounded">–û–¥–æ–±—Ä–∏—Ç—å</button>
            <button name="action" value="reject" class="bg-red-500 text-white px-3 py-1 rounded">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
          </form>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-sm text-gray-500">–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫.</p>
    {% endif %}
  </div>

  <!-- –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ -->
  <div class="mb-6">
    <h3 class="text-lg font-semibold mb-2 text-green-600">‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ</h3>
    {% for r in approved_requests %}
      <div class="bg-green-50 border rounded p-2 mb-2 text-sm">
        {{ r.user.get_full_name }} ‚Äî {{ r.get_leave_type_display }} ({{ r.start_date }} ‚Üí {{ r.end_date }})
      </div>
    {% empty %}
      <p class="text-sm text-gray-500">–ù–µ—Ç.</p>
    {% endfor %}
  </div>

  <!-- –û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ -->
  <div class="mb-6">
    <h3 class="text-lg font-semibold mb-2 text-red-600">‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ</h3>
    {% for r in rejected_requests %}
      <div class="bg-red-50 border rounded p-2 mb-2 text-sm">
        {{ r.user.get_full_name }} ‚Äî {{ r.get_leave_type_display }} ({{ r.start_date }} ‚Üí {{ r.end_date }})
      </div>
    {% empty %}
      <p class="text-sm text-gray-500">–ù–µ—Ç.</p>
    {% endfor %}
  </div>

</div>
{% endblock %}
