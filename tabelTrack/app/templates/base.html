<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ростелеком - HR Система{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/leave_request.css' %}">
</head>
<body>
    <!-- Mobile Overlay -->
    <div class="mobile-overlay md:hidden" id="mobileOverlay"></div>

    <!-- Sidebar -->
    <div class="sidebar fixed left-0 top-0 h-full w-64 z-50" id="sidebar">
        <!-- Toggle Button -->
        <div class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-chevron-left"></i>
        </div>

        <!-- Logo Section -->
        <div class="p-6 border-b border-gray-600 border-opacity-30">
            <div class="flex items-center space-x-3">
                <div class="rt-logo w-12 h-12 rounded-xl flex items-center justify-center shadow-lg">
                    <i class="fas fa-network-wired text-xl"></i>
                </div>
                <div class="sidebar-text">
                    <h3 class="text-white text-lg font-bold">Ростелеком</h3>
                    <p class="text-slate-300 text-sm">HR Система</p>
                </div>
            </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="p-4 flex-1 overflow-y-auto">
            <!-- Main Menu -->
            <div class="space-y-2">
                <div class="sidebar-item active px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-home w-5 text-center"></i>
                    <span class="sidebar-text font-medium">Главная</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-calendar-alt w-5 text-center"></i>
                    <span class="sidebar-text">Мой табель</span>
                    <span class="rt-badge sidebar-text ml-auto">2</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-clock w-5 text-center"></i>
                    <span class="sidebar-text">Учёт времени</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-paper-plane w-5 text-center"></i>
                    <span class="sidebar-text">Заявки</span>
                    <span class="rt-badge sidebar-text ml-auto">3</span>
                </div>
            </div>

            <!-- Reports Section -->
            <div class="sidebar-section-title">Отчёты</div>
            <div class="space-y-2">
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-chart-bar w-5 text-center"></i>
                    <span class="sidebar-text">Статистика</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-file-export w-5 text-center"></i>
                    <span class="sidebar-text">Экспорт данных</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-history w-5 text-center"></i>
                    <span class="sidebar-text">История</span>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="sidebar-section-title">Настройки</div>
            <div class="space-y-2">
                <a href="{% url 'profile' %}" class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-user-cog w-5 text-center"></i>
                    <span class="sidebar-text">Профиль</span>
                </a>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-bell w-5 text-center"></i>
                    <span class="sidebar-text">Уведомления</span>
                    <span class="rt-badge sidebar-text ml-auto">5</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-cog w-5 text-center"></i>
                    <span class="sidebar-text">Настройки</span>
                </div>
            </div>

            <!-- Support Section -->
            <div class="sidebar-section-title">Поддержка</div>
            <div class="space-y-2">
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-question-circle w-5 text-center"></i>
                    <span class="sidebar-text">Справка</span>
                </div>
                <div class="sidebar-item px-4 py-3 cursor-pointer flex items-center space-x-3 rounded-lg">
                    <i class="fas fa-headset w-5 text-center"></i>
                    <span class="sidebar-text">Поддержка</span>
                </div>
            </div>
        </nav>

        <!-- User Profile -->
        <div class="p-4 border-t border-gray-600 border-opacity-30">
            <div class="rt-card rounded-xl p-4">
                <div class="flex items-center space-x-3">
                    <div class="rt-logo w-10 h-10 rounded-lg flex items-center justify-center text-sm font-bold">
                        АИ
                    </div>
                    <div class="sidebar-text flex-1">
                        <p class="font-semibold text-sm text-gray-900">Андрей Иванов</p>
                        <p class="text-gray-500 text-xs">Сотрудник</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Button -->
    <button class="md:hidden fixed top-4 left-4 z-50 rt-button rounded-lg" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Main Content -->
    <div class="main-content ml-64 md:ml-64" id="mainContent">
        {% block content %}{% endblock %}
    </div>

    <!-- JavaScript -->
    <script>
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileOverlay = document.getElementById('mobileOverlay');
        const mainContent = document.getElementById('mainContent');

        // Sidebar Toggle
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('sidebar-collapsed');
            if (sidebar.classList.contains('sidebar-collapsed')) {
                mainContent.classList.remove('ml-64');
                mainContent.classList.add('ml-20');
            } else {
                mainContent.classList.remove('ml-20');
                mainContent.classList.add('ml-64');
            }
        });

        // Mobile Menu Toggle
        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('mobile-open');
            mobileOverlay.classList.toggle('active');
        });

        mobileOverlay.addEventListener('click', () => {
            sidebar.classList.remove('mobile-open');
            mobileOverlay.classList.remove('active');
        });

        // Dynamic Date and Time
        function updateDateTime() {
            const now = new Date();
            const options = {
                day: 'numeric',
                month: 'long',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('current-datetime').innerHTML = `<i class="fas fa-clock"></i> ${now.toLocaleString('ru-RU', options)}`;
        }
        setInterval(updateDateTime, 1000);
        updateDateTime();

        // Dynamic Greeting
        const hours = new Date().getHours();
        let greeting = 'Доброе утро';
        if (hours >= 12 && hours < 17) greeting = 'Добрый день';
        else if (hours >= 17 || hours < 5) greeting = 'Добрый вечер';
        document.getElementById('greeting').textContent = greeting;
    </script>
</body>
</html>