{% extends "base.html" %}
{% load filter_extras %}
{% block title %}–ú–æ–π —Ç–∞–±–µ–ª—å{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto p-6">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-bold">üìÖ –¢–∞–±–µ–ª—å —É—á—ë—Ç–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</h2>
    <!-- –§–∏–ª—å—Ç—Ä -->
    <form method="get" class="flex space-x-2">
      <select name="month" class="border rounded px-2 py-1 text-sm">
        {% for m in 1|to_range:12 %}
          <option value="{{ m }}" {% if m == today.month %}selected{% endif %}>{{ m }}</option>
        {% endfor %}
      </select>
      <select name="year" class="border rounded px-2 py-1 text-sm">
        {% for y in year_range %}
          <option value="{{ y }}" {% if y == today.year %}selected{% endif %}>{{ y }}</option>
        {% endfor %}
      </select>
      <button class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700">
        –ü–æ–∫–∞–∑–∞—Ç—å
      </button>
    </form>
  </div>

  <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
  <div class="flex space-x-4 mb-4 text-sm text-gray-600">
    <div class="flex items-center"><div class="w-4 h-4 bg-green-300 rounded mr-1"></div>–†–∞–±–æ—Ç–∞</div>
    <div class="flex items-center"><div class="w-4 h-4 bg-blue-300 rounded mr-1"></div>–û—Ç–ø—É—Å–∫</div>
    <div class="flex items-center"><div class="w-4 h-4 bg-yellow-300 rounded mr-1"></div>–ë–æ–ª—å–Ω–∏—á–Ω—ã–π</div>
    <div class="flex items-center"><div class="w-4 h-4 bg-red-300 rounded mr-1"></div>–ù–µ—è–≤–∫–∞</div>
  </div>

  <!-- –°–µ—Ç–∫–∞ -->
  <div class="grid grid-cols-7 gap-2 text-center text-sm font-medium">
    {% for d in weekdays %}
      <div class="py-2 text-gray-500">{{ d }}</div>
    {% endfor %}

    {% for day in calendar %}
      <div class="rounded-lg p-2 h-20 flex flex-col justify-between relative shadow-sm transition hover:scale-[1.02]
          {% if day.status == 'work' %}bg-green-200
          {% elif day.status == 'vacation' %}bg-blue-200
          {% elif day.status == 'sick' %}bg-yellow-200
          {% elif day.status == 'absent' %}bg-red-200
          {% else %}bg-gray-100{% endif %}">
        <div class="text-sm font-semibold">{{ day.date.day }}</div>
        <div class="text-xs text-gray-700">{{ day.status_label }}</div>

        {% if day.date == today %}
          <span class="absolute top-1 right-1 bg-white border text-xs rounded px-1 font-semibold text-indigo-500">–°–µ–≥–æ–¥–Ω—è</span>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
